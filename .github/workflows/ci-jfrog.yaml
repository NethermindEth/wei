name: Build and Push image on jfrog for dev env

on:
  push:
    branches: [develop]
  pull_request:
    branches: [develop]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

permissions:
  id-token: write
  attestations: write
  contents: read

jobs:
  push-wei-bd:
    uses: NethermindEth/github-workflows/.github/workflows/docker-build-push-jfrog.yaml@1d0525fa740f879a4c9b00678bd3ccc27056e92a
    with:
      repo_name: productsvents-oci-local-dev
      image_name: wei
      platforms: "linux/arm64"
      ignore_trivy: true
      context: .
      dockerfile_path: ./Dockerfile
      push: ${{ github.event_name != 'pull_request' }}
